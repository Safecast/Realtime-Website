function c(n){++cc,console.log("== "+cc+": "+n)}function ct(n){c(n),console.trace()}function co(n,e){++cc,console.log("== "+cc+": "+n+": %o",e)}function qtranxj_get_cookie(n){for(var e=document.cookie.split(";"),a=0;a<e.length;++a){var t=e[a],o=t.split("=");if(o[0].trim()==n&&!(e.length<2))return o[1].trim()}return""}function qtranxj_isArray(n){return n.constructor.toString().indexOf("Array")>=0}function qtranxj_ce(n,e,a,t){var o=document.createElement(n);if(e)for(prop in e)o[prop]=e[prop];return a&&(t&&a.firstChild?a.insertBefore(o,a.firstChild):a.appendChild(o)),o}function qtranxj_LanguageSwitch(n){function e(){var n=this;if(!n.lang)return void alert("qTranslate-X: This should not have happened: Please, report this incident to the developers: !tabSwitch.lang");if(qTranslateConfig.activeLanguage!==n.lang){qTranslateConfig.activeLanguage&&o[qTranslateConfig.activeLanguage].classList.remove("active"),qTranslateConfig.activeLanguage=n.lang,n.classList.add("active");for(var e=0;e<i.length;++e)i[e].call(this)}}for(var a=qTranslateConfig.enabled_languages,t=qTranslateConfig.language_name,o={},i=[],r=0;r<a.length;++r){var s=qTranslateConfig.flag_location,l=a[r],g=qtranxj_ce("li",{lang:l,className:"qtranxs-lang-switch",onclick:e},n);qtranxj_ce("img",{src:s+qTranslateConfig.flag[l]},g),qtranxj_ce("span",{innerHTML:t[l]},g),o[l]=g,qTranslateConfig.activeLanguage==l&&g.classList.add("active")}this.onSwitch=function(n){"function"==typeof n&&i.push(n)}}var cc=0;qtranxj_split=function(n,e){for(var a=new Object,t=0;t<qTranslateConfig.enabled_languages.length;++t){var o=qTranslateConfig.enabled_languages[t];a[o]=""}var i=/(<!--:[a-z]{2}-->|<!--:-->|\[:[a-z]{2}\])/gi,r=n.xsplit(i);if(!qtranxj_isArray(r))return a;if(1==r.length){for(var s=r[0],l=0;l<qTranslateConfig.enabled_languages.length;++l){var o=qTranslateConfig.enabled_languages[l];a[o]+=s}return a}var g=/<!--:([a-z]{2})-->/gi,d=/<!--:-->/g,u=/\[:([a-z]{2})\]/gi;o=!1;for(var t=0;t<r.length;++t){var s=r[t];if(s.length)if(matches=g.exec(s),g.lastIndex=0,null==matches)if(matches=d.exec(s),d.lastIndex=0,null==matches)if(matches=u.exec(s),u.lastIndex=0,null==matches){if(o)a[o]+=s,o=!1;else if(e)for(var c in a)a[c]+=s}else o=matches[1];else o=!1;else o=matches[1]}return a},qtranxj_allthesame=function(n){if(0==qTranslateConfig.enabled_languages.length)return"";for(var e="",a=0;a<qTranslateConfig.enabled_languages.length;++a){var t=qTranslateConfig.enabled_languages[a],o=n[t];if(o&&""!=o){e=o;break}}if(""==e)return e;for(var a=0;a<qTranslateConfig.enabled_languages.length;++a){var t=qTranslateConfig.enabled_languages[a],o=n[t];if(o!=e)return null}return e},qtranxj_join_c=function(n){var e=qtranxj_allthesame(n);if(null!=e)return e;e="";for(var a=0;a<qTranslateConfig.enabled_languages.length;++a){var t=qTranslateConfig.enabled_languages[a],o=n[t];o&&""!=o&&(e+="<!--:"+t+"-->",e+=o,e+="<!--:-->")}return e},qtranxj_join_b=function(n){var e=qtranxj_allthesame(n);if(null!=e)return e;for(var e="",a=0;a<qTranslateConfig.enabled_languages.length;++a){var t=qTranslateConfig.enabled_languages[a],o=n[t];o&&""!=o&&(e+="[:"+t+"]",e+=o)}return e},String.prototype.xsplit=function(n){if(3==="a~b".split(/(~)/).length)return this.split(n);n.global||(n=new RegExp(n.source,"g"+(n.ignoreCase?"i":"")));for(var e,a=0,t=[];null!=(e=n.exec(this));)t.push(this.slice(a,e.index)),e.length>1&&t.push(e[1]),a=n.lastIndex;return a<this.length&&t.push(this.slice(a)),a==this.length&&t.push(""),t};var qTranslateX=function(n){this.ge=function(n){return document.getElementById(n)},isLanguageEnabled=function(n){for(var e=0;e<qTranslateConfig.enabled_languages.length;++e)if(qTranslateConfig.enabled_languages[e]==n)return!0;return!1},qTranslateConfig.activeLanguage=qtranxj_get_cookie("qtrans_edit_language"),qTranslateConfig.activeLanguage&&isLanguageEnabled(qTranslateConfig.activeLanguage)||(qTranslateConfig.activeLanguage=qTranslateConfig.language),this.getActiveLanguage=function(){return qTranslateConfig.activeLanguage};var e=[],a={};updateFusedValueHooked=function(n){n.mlContentField.value="<"===n.separator?qtranxj_join_c(n.contents):qtranxj_join_b(n.contents)},updateFusedValueH=function(n,e){var t=a[n],o=e.trim();t.contents[t.lang]=o,updateFusedValueHooked(t)},addContentHook=function(n,e,t){if(!n)return!1;if(a[n.id])return!0;var o=a[n.id]={};o.contentField=n,o.contents=qtranxj_split(n.value,!0),o.mlContentField=qtranxj_ce("input",{name:n.name,type:"hidden",className:"hidden",value:n.value},e,!0),t||(t="TEXTAREA"===n.tagName?"<":"["),o.separator=t,n.name="edit-"+n.name,o.lang=qTranslateConfig.activeLanguage;var i=o.contents[o.lang];if(n.value=i,n.onblur=function(){updateFusedValueH(this.id,this.value)},window.tinyMCE)for(var r=0;r<tinyMCE.editors.length;++r){var s=tinyMCE.editors[r];s.id==n.id&&(o.mce=s,updateTinyMCE(s,i))}return o},this.addContentHookC=function(n,e){return addContentHook(n,e,"<")},this.addContentHookB=function(n,e){return addContentHook(n,e,"[")},this.addContentHookById=function(n,e,a){return addContentHook(this.ge(n),e,a)},this.addContentHookByIdName=function(n,e){var a;return(0==n.indexOf("<")||0==n.indexOf("["))&&(a=n.substring(0,1),n=n.substring(1)),this.addContentHookById(n,e,a)},this.addContentHookByIdC=function(n,e){return this.addContentHookById(n,e,"<")},this.addContentHookByIdB=function(n,e){return this.addContentHookById(n,e,"[")},addDisplayHook=function(n){if(!n)return!1;var a={};a.elem=n;var t=n.innerHTML.replace(/&lt;!--:([a-z]{2}|)--&gt;/gi,"<!--:$1-->");return a.contents=qtranxj_split(t,!0),n.innerHTML=a.contents[qTranslateConfig.activeLanguage],e.push(a),!0},this.addDisplayHookById=function(n){return addDisplayHook(this.ge(n))},setLangCookie=function(n){document.cookie="qtrans_edit_language="+n},updateTinyMCE=function(n,e){window.switchEditors&&(e=window.switchEditors.wpautop(e)),n.setContent(e,{format:"html"})},onTabSwitch=function(){setLangCookie(this.lang);for(var n=0;n<e.length;++n){var t=e[n];t.elem.innerHTML=t.contents[this.lang]}for(var o in a){var t=a[o],i=t.mce&&!t.mce.hidden;i&&(t.mce.save({format:"html"}),t.contents[t.lang]=t.contentField.value),t.lang=this.lang,t.contentField.value=t.contents[this.lang],i&&updateTinyMCE(t.mce,t.contentField.value)}};var t=this;if(onTabSwitchCustom=function(){n.onTabSwitch(this.lang,t)},addDisplayHooks=function(n){for(var e=0;e<n.length;++e){var a=n[e];addDisplayHook(a)}},this.addDisplayHooksByClass=function(n,e){var a=e.getElementsByClassName(n);addDisplayHooks(a)},this.addDisplayHooksByTagInClass=function(n,e,a){for(var t=a.getElementsByClassName(n),o=0;o<t.length;++o){var i=t[o],r=i.getElementsByTagName(e);addDisplayHooks(r)}},addContentHooksByClassName=function(n,e,a,t){a||(a=e);for(var o=a.getElementsByClassName(n),i=0;i<o.length;++i){var r=o[i];addContentHook(r,e,t)}},this.addContentHooksByClass=function(n,e,a){var t;(0==n.indexOf("<")||0==n.indexOf("["))&&(t=n.substring(0,1),n=n.substring(1)),addContentHooksByClassName(n,e,a,t)},this.addContentHooks=function(n){for(var e=0;e<qTranslateConfig.custom_fields.length;++e){var a=qTranslateConfig.custom_fields[e];this.addContentHookByIdName(a,n)}for(var e=0;e<qTranslateConfig.custom_field_classes.length;++e){var a=qTranslateConfig.custom_field_classes[e];this.addContentHooksByClass(a,n)}},this.addPageHooks=function(n){for(var e=0;e<n.forms.length;++e){var a=n.forms[e],t=document.getElementById(a.form.id);if(t)for(var o=0;o<a.fields.length;++o){var i=a.fields[o],r=i.encode;if(i.id)this.addContentHookById(i.id,t,r);else{if(!i.class)continue;addContentHooksByClassName(i.class,t,t,r)}}}return!0},this.addContentHooksTinyMCE=function(){function n(n){var e=n.id;if(e){var t=a[e];if(t&&!t.mce)return t.mce=n,n.getBody().addEventListener("blur",function(){var e=a[n.id];n.save(),e.contents[e.lang]=e.contentField.value,updateFusedValueHooked(e)}),t}}window.addEventListener("load",function(){if(window.tinyMCE){for(var e=0;e<tinyMCE.editors.length;++e){var t=tinyMCE.editors[e],o=n(t);o&&updateTinyMCE(t,o.contentField.value)}for(var i in a){var o=a[i];o.mce||"TEXTAREA"===o.contentField.tagName&&(tinyMCEPreInit.mceInit[i].init_instance_callback=function(e){n(e)})}}})},this.getWrapForm=function(){for(var n=document.getElementsByClassName("wrap"),e=0;e<n.length;++e){var a=n[e],t=a.getElementsByTagName("form");if(t.length)return t[0]}for(var t=document.getElementsByTagName("form"),e=0;e<t.length;++e){var o=t[e];if(n=o.getElementsByClassName("wrap"),n.length)return o}return null},this.getFormWrap=function(){for(var n=document.getElementsByTagName("form"),e=0;e<n.length;++e){var a=n[e],t=a.getElementsByClassName("wrap");if(t.length)return t[0]}for(var t=document.getElementsByClassName("wrap"),e=0;e<t.length;++e){var o=t[e];if(n=o.getElementsByTagName("form"),n.length)return o}return null},("function"!=typeof n.addContentHooks||n.addContentHooks(this))&&(!qTranslateConfig.page_config||this.addPageHooks(qTranslateConfig.page_config))){var o=[];if(qTranslateConfig.page_config&&qTranslateConfig.page_config.anchors)for(var i=0;i<qTranslateConfig.page_config.anchors.length;++i){var r=qTranslateConfig.page_config.anchors[i],s=document.getElementById(r);s&&o.push(s)}if(!o.length){var s=n.langSwitchWrapAnchor;s||(s=this.getWrapForm()),s||(s=this.getWrapForm()),s&&o.push(s)}for(var i=0;i<o.length;++i){var r=o[i],l=qtranxj_ce("ul",{className:"qtranxs-lang-switch-wrap"});r.parentNode.insertBefore(l,r);var g=new qtranxj_LanguageSwitch(l);g.onSwitch(onTabSwitch),n.onTabSwitch&&g.onSwitch(onTabSwitchCustom)}}};jQuery(document).ready(function(){new qTranslateX(qTranslateConfig.js)});